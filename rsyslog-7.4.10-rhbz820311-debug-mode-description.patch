From 6a5e345f0ad4994f587b5cf4e1b878bfe7a6ddd0 Mon Sep 17 00:00:00 2001
From: theinric <heinrich.tomas@gmail.com>
Date: Mon, 12 May 2014 10:19:48 +0200
Subject: [PATCH] Clarify debug mode behavior in man page

---
 tools/rsyslogd.8 | 27 ++++++++++++++++++---------
 1 file changed, 18 insertions(+), 9 deletions(-)

diff --git a/tools/rsyslogd.8 b/tools/rsyslogd.8
index 620006f..1b4febb 100644
--- a/tools/rsyslogd.8
+++ b/tools/rsyslogd.8
@@ -131,11 +131,7 @@ syntax errors are reported. Please note that the output generated is deeply
 technical and orignally targeted towards developers.
 .TP
 .B "\-d"
-Turns on debug mode.  Using this the daemon will not proceed a 
-.BR fork (2)
-to set itself in the background, but opposite to that stay in the
-foreground and write much debug information on the current tty.  See the
-DEBUGGING section for more information.
+Turns on debug mode. See the DEBUGGING section for more information.
 .TP
 .BI "\-f " "config file"
 Specify an alternative configuration file instead of
@@ -294,11 +290,17 @@ be prevented by using GSS-API authentication and encryption. Be sure
 to think about syslog network security before enabling it.
 .LP
 .SH DEBUGGING
-When debugging is turned on using
+When debugging is turned on using the
 .B "\-d"
-option then
+option,
 .B rsyslogd
-will be very verbose by writing much of what it does on stdout.
+produces debugging information according to the
+.B RSYSLOG_DEBUG
+environment variable and the signals received. When run in foreground,
+the information is written to stdout. An additional output file can be
+specified using the
+.B RSYSLOG_DEBUGLOG
+environment variable.
 .SH FILES
 .PD 0
 .TP
@@ -325,10 +327,17 @@ is specified during compilation (e.g. /usr/local).
 .SH ENVIRONMENT
 .TP
 .B RSYSLOG_DEBUG
-Controls runtime debug support.It contains an option string with the
+Controls runtime debug support. It contains an option string with the
 following options possible (all are case insensitive):
 
 .RS
+.IP Debug
+Turns on debugging and prevents forking. This is processed earlier
+in the startup than command line options (i.e. -d) and as such
+enables earlier debugging output. Mutually exclusive with DebugOnDemand.
+.IP DebugOnDemand
+Enables debugging but turns off debug output. The output can be toggled
+by sending SIGUSR1. Mutually exclusive with Debug.
 .IP LogFuncFlow
 Print out the logical flow of functions (entering and exiting them)
 .IP FileTrace
-- 
1.9.0

